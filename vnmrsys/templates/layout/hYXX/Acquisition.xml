<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  hYXX Acquisition Tab
  3D H→Y(F2)→mixing→Y→YX CP→X(F1)→XH CP→H(direct)
-->
<template name="Acquisition" element="pages" type="acquisition" >
  <group size="800 280"
    style="Heading1"
    label="Acquisition"
    vq="panellevel"
    show="$SHOW=(panellevel&gt;0)"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="Acquisition"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >

    <!-- Experiment Time Display -->
    <label loc="600 10" size="180 20"
      style="Heading2"
      label="Est. Time:"
      justify="Left"
      />
    <textmessage loc="680 10" size="100 20"
      style="Heading2"
      vq="ni ni2 nt d1 at"
      set="$VALUE=(ni*ni2*nt*(d1+at))/3600"
      digits="1"
      />
    <label loc="780 10" size="20 20"
      style="Heading2"
      label="h"
      justify="Left"
      />

    <!-- F3 Direct Dimension (H observe) -->
    <group loc="10 10" size="250 180"
      style="Heading2"
      label="F3 Acquisition (Direct, H)"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 20" size="80 20"
        style="Label1"
        label="Spectral Width"
        justify="Left"
        />
      <entry loc="100 20" size="80 20"
        style="PlainText"
        vq="sw"
        vc="sw=$VALUE"
        set="$VALUE=sw"
        digits="1"
        tooltip="Spectral width - sets chemical shift range"
        />
      <label loc="190 20" size="30 20"
        style="Label1"
        label="Hz"
        />

      <label loc="10 45" size="80 20"
        style="Label1"
        label="Acq. Time"
        justify="Left"
        />
      <entry loc="100 45" size="80 20"
        style="PlainText"
        vq="at"
        vc="at=$VALUE*0.001"
        set="$VALUE=at*1000"
        digits="2"
        />
      <menu loc="190 45" size="50 20"
        style="PlainText"
        vq="at"
        vc="at=$VALUE"
        set="$VALUE=at"
        editable="No"
        >
        <mlabel label="ms" chval="at*1000" />
        <mlabel label="sec" chval="at" />
      </menu>

      <label loc="10 70" size="80 20"
        style="Label1"
        label="Relaxation d1"
        justify="Left"
        />
      <entry loc="100 70" size="80 20"
        style="PlainText"
        vq="d1"
        vc="d1=$VALUE"
        set="$VALUE=d1"
        digits="3"
        tooltip="Recycle delay - must allow magnetization recovery and thermal equilibration"
        />
      <label loc="190 70" size="30 20"
        style="Label1"
        label="s"
        />

      <label loc="10 95" size="80 20"
        style="Label1"
        label="Duty Cycle"
        justify="Left"
        />
      <textmessage loc="100 95" size="80 20"
        style="Label1"
        vq="tRF d1"
        set="if (d1&gt;0) then $VALUE=(tRF/d1)*100 else $VALUE=0 endif"
        digits="2"
        />
      <label loc="190 95" size="30 20"
        style="Label1"
        label="%"
        />
      <textmessage loc="10 115" size="230 20"
        style="Label3"
        vq="tRF d1"
        set="if (d1&gt;0) then $dc=(tRF/d1)*100 if ($dc&gt;25) then $safe5=tRF/0.05 $safe15=tRF/0.15 if ($safe5&gt;10) then $VALUE='Safe d1 ≥ '+$safe15+' s (15%)' else $VALUE='Safe d1 ≥ '+$safe5+' s (5%)' endif else $VALUE='(target &lt; 25%)' endif else $VALUE='(target &lt; 25%)' endif"
        />

      <label loc="10 140" size="80 20"
        style="Label1"
        label="Transients"
        justify="Left"
        />
      <entry loc="100 140" size="80 20"
        style="PlainText"
        vq="nt"
        vc="nt=$VALUE"
        set="$VALUE=nt"
        digits="0"
        />
    </group>

    <!-- F1 Indirect Dimension (X evolution) -->
    <group loc="270 10" size="240 160"
      style="Heading2"
      label="F1 Acquisition (Indirect, X)"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 20" size="80 20"
        style="Label1"
        label="Spectral Width"
        justify="Left"
        />
      <entry loc="100 20" size="80 20"
        style="PlainText"
        vq="sw1"
        vc="sw1=$VALUE"
        set="$VALUE=sw1"
        digits="1"
        show="if (ni&lt;2) then $VALUE=0 else $VALUE=1 endif"
        />
      <label loc="190 20" size="30 20"
        style="Label1"
        label="Hz"
        />

      <label loc="10 45" size="80 20"
        style="Label1"
        label="Increments"
        justify="Left"
        />
      <entry loc="100 45" size="80 20"
        style="PlainText"
        vq="ni"
        vc="ni=$VALUE"
        set="$VALUE=ni"
        digits="0"
        tooltip="Number of increments - affects resolution and experiment time"
        />
      <textmessage loc="10 65" size="220 20"
        style="Label3"
        vq="ni sw1"
        set="if ni&gt;1 then $VALUE='Resolution: '+(sw1/ni)+' Hz' else $VALUE='' endif"
        digits="1"
        />

      <label loc="10 70" size="80 20"
        style="Label1"
        label="Max Acq. Time"
        justify="Left"
        />
      <textmessage loc="100 70" size="80 20"
        style="Label1"
        vq="ni sw1"
        set="if ni&gt;1 then $VALUE=ni/sw1 else $VALUE=0 endif"
        digits="4"
        />
      <label loc="190 70" size="30 20"
        style="Label1"
        label="s"
        />

      <check loc="10 100" size="150 20"
        label="Half-Dwell Delay"
        vq="f1180"
        vc="f1180='y'"
        vc2="f1180='n'"
        set="if f1180='y' then $VALUE=1 else $VALUE=0 endif"
        />
    </group>

    <!-- F2 Indirect Dimension (Y evolution) -->
    <group loc="520 10" size="240 160"
      style="Heading2"
      label="F2 Acquisition (Indirect, Y)"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 20" size="80 20"
        style="Label1"
        label="Spectral Width"
        justify="Left"
        />
      <entry loc="100 20" size="80 20"
        style="PlainText"
        vq="sw2"
        vc="sw2=$VALUE"
        set="$VALUE=sw2"
        digits="1"
        show="if (ni2&lt;2) then $VALUE=0 else $VALUE=1 endif"
        />
      <label loc="190 20" size="30 20"
        style="Label1"
        label="Hz"
        />

      <label loc="10 45" size="80 20"
        style="Label1"
        label="Increments"
        justify="Left"
        />
      <entry loc="100 45" size="80 20"
        style="PlainText"
        vq="ni2"
        vc="ni2=$VALUE"
        set="$VALUE=ni2"
        digits="0"
        tooltip="Number of increments - affects resolution and experiment time"
        />
      <textmessage loc="10 65" size="220 20"
        style="Label3"
        vq="ni2 sw2"
        set="if ni2&gt;1 then $VALUE='Resolution: '+(sw2/ni2)+' Hz' else $VALUE='' endif"
        digits="1"
        />

      <label loc="10 70" size="80 20"
        style="Label1"
        label="Max Acq. Time"
        justify="Left"
        />
      <textmessage loc="100 70" size="80 20"
        style="Label1"
        vq="ni2 sw2"
        set="if ni2&gt;1 then $VALUE=ni2/sw2 else $VALUE=0 endif"
        digits="4"
        />
      <label loc="190 70" size="30 20"
        style="Label1"
        label="s"
        />

      <check loc="10 100" size="150 20"
        label="Half-Dwell Delay"
        vq="f2180"
        vc="f2180='y'"
        vc2="f2180='n'"
        set="if f2180='y' then $VALUE=1 else $VALUE=0 endif"
        />
    </group>

    <!-- Sample Parameters -->
    <group loc="10 200" size="350 70"
      style="Heading2"
      label="Sample"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 20" size="80 20"
        style="Label1"
        label="MAS Rate"
        justify="Left"
        />
      <entry loc="100 20" size="80 20"
        style="PlainText"
        vq="srate"
        vc="srate=$VALUE"
        set="$VALUE=srate"
        digits="0"
        tooltip="MAS rate - must be stable for rotor-synchronized sequences"
        />
      <label loc="190 20" size="30 20"
        style="Label1"
        label="Hz"
        />

      <label loc="10 45" size="80 20"
        style="Label1"
        label="Temperature"
        justify="Left"
        />
      <entry loc="100 45" size="80 20"
        style="PlainText"
        vq="temp"
        vc="temp=$VALUE"
        set="$VALUE=temp"
        digits="1"
        />
      <label loc="190 45" size="30 20"
        style="Label1"
        label="°C"
        />
    </group>

    <!-- Receiver Settings -->
    <group loc="370 200" size="390 70"
      style="Heading2"
      label="Receiver Settings"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 20" size="50 20"
        style="Label1"
        label="Gain"
        justify="Left"
        />
      <entry loc="70 20" size="60 20"
        style="PlainText"
        vq="gain"
        vc="gain=$VALUE"
        set="$VALUE=gain"
        digits="0"
        />

      <label loc="150 20" size="50 20"
        style="Label1"
        label="rd"
        justify="Left"
        />
      <entry loc="210 20" size="60 20"
        style="PlainText"
        vq="rd"
        vc="rd=$VALUE"
        set="$VALUE=rd"
        digits="2"
        />
      <label loc="280 20" size="30 20"
        style="Label1"
        label="µs"
        />

      <label loc="150 45" size="50 20"
        style="Label1"
        label="ad"
        justify="Left"
        />
      <entry loc="210 45" size="60 20"
        style="PlainText"
        vq="ad"
        vc="ad=$VALUE"
        set="$VALUE=ad"
        digits="2"
        />
      <label loc="280 45" size="30 20"
        style="Label1"
        label="µs"
        />

      <label loc="320 20" size="50 20"
        style="Label1"
        label="ddrtc"
        justify="Left"
        />
      <entry loc="320 45" size="60 20"
        style="PlainText"
        vq="ddrtc"
        vc="ddrtc=$VALUE"
        set="$VALUE=ddrtc"
        digits="2"
        />
    </group>

  </group>
</template>
