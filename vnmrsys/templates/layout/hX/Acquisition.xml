<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
  hX Acquisition Tab
  Basic acquisition and sample parameters
-->
<template name="Acquisition" element="pages" type="acquisition" >
  <group size="800 300"
    style="Heading1"
    label="Acquisition"
    vq="panellevel"
    show="$SHOW=(panellevel&gt;0)"
    border="None"
    side="Top"
    justify="Left"
    tab="yes"
    enable="no"
    reference="Acquisition"
    useref="no"
    subtype="Basic"
    expanded="yes"
    >

    <!-- Experiment Time Display -->
    <label loc="600 10" size="180 20"
      style="Heading2"
      label="Est. Time:"
      justify="Left"
      />
    <textmessage loc="680 10" size="100 20"
      style="Heading2"
      vq="nt d1 at"
      set="$VALUE=(nt*(d1+at))/3600"
      digits="1"
      />
    <label loc="780 10" size="20 20"
      style="Heading2"
      label="h"
      justify="Left"
      />

    <!-- Basic Acquisition Parameters -->
    <group loc="10 10" size="400 150"
      style="Heading2"
      label="Basic Acquisition"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 20" size="80 20"
        style="Label1"
        label="Spectral Width"
        justify="Left"
        />
      <entry loc="100 20" size="80 20"
        style="PlainText"
        vq="sw"
        vc="sw=$VALUE"
        set="$VALUE=sw"
        digits="1"
        tooltip="Spectral width - sets chemical shift range"
        />
      <label loc="190 20" size="30 20"
        style="Label1"
        label="Hz"
        />

      <label loc="10 45" size="80 20"
        style="Label1"
        label="Acq. Time"
        justify="Left"
        />
      <entry loc="100 45" size="80 20"
        style="PlainText"
        vq="at"
        vc="at=$VALUE*0.001"
        set="$VALUE=at*1000"
        digits="2"
        />
      <menu loc="190 45" size="50 20"
        style="PlainText"
        vq="at"
        vc="at=$VALUE"
        set="$VALUE=at"
        editable="No"
        >
        <mlabel label="ms" chval="at*1000" />
        <mlabel label="sec" chval="at" />
      </menu>

      <label loc="10 70" size="80 20"
        style="Label1"
        label="Relaxation d1"
        justify="Left"
        />
      <entry loc="100 70" size="80 20"
        style="PlainText"
        vq="d1"
        vc="d1=$VALUE"
        set="$VALUE=d1"
        digits="3"
        tooltip="Recycle delay - must allow magnetization recovery and thermal equilibration"
        />
      <label loc="190 70" size="30 20"
        style="Label1"
        label="s"
        />

      <label loc="10 95" size="80 20"
        style="Label1"
        label="Duty Cycle"
        justify="Left"
        />
      <textmessage loc="100 95" size="80 20"
        style="Label1"
        vq="tRF d1"
        set="if (d1&gt;0) then $VALUE=(tRF/d1)*100 else $VALUE=0 endif"
        digits="2"
        />
      <label loc="190 95" size="30 20"
        style="Label1"
        label="%"
        />
      <textmessage loc="10 115" size="230 20"
        style="Label3"
        vq="tRF d1"
        set="if (d1&gt;0) then $dc=(tRF/d1)*100 if ($dc&gt;25) then $safe5=tRF/0.05 $safe15=tRF/0.15 if ($safe5&gt;10) then $VALUE='Safe d1 ≥ '+$safe15+' s (15%)' else $VALUE='Safe d1 ≥ '+$safe5+' s (5%)' endif else $VALUE='(target &lt; 25%)' endif else $VALUE='(target &lt; 25%)' endif"
        />

      <label loc="10 140" size="80 20"
        style="Label1"
        label="Transients"
        justify="Left"
        />
      <entry loc="100 140" size="80 20"
        style="PlainText"
        vq="nt"
        vc="nt=$VALUE"
        set="$VALUE=nt"
        digits="0"
        />
    </group>

    <!-- Sample Parameters -->
    <group loc="420 10" size="240 160"
      style="Heading2"
      label="Sample"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 20" size="80 20"
        style="Label1"
        label="MAS Rate"
        justify="Left"
        />
      <entry loc="100 20" size="80 20"
        style="PlainText"
        vq="srate"
        vc="srate=$VALUE"
        set="$VALUE=srate"
        digits="0"
        tooltip="MAS rate - must be stable for rotor-synchronized sequences"
        />
      <label loc="190 20" size="30 20"
        style="Label1"
        label="Hz"
        />

      <label loc="10 45" size="80 20"
        style="Label1"
        label="Temperature"
        justify="Left"
        />
      <entry loc="100 45" size="80 20"
        style="PlainText"
        vq="temp"
        vc="temp=$VALUE"
        set="$VALUE=temp"
        digits="1"
        />
      <label loc="190 45" size="30 20"
        style="Label1"
        label="°C"
        />
    </group>

    <!-- Receiver Settings -->
    <group loc="10 200" size="400 90"
      style="Heading2"
      label="Receiver Settings"
      border="Etched"
      side="Top"
      justify="Left"
      tab="no"
      enable="no"
      useref="no"
      subtype="Basic"
      >
      <label loc="10 20" size="50 20"
        style="Label1"
        label="Gain"
        justify="Left"
        />
      <entry loc="70 20" size="60 20"
        style="PlainText"
        vq="gain"
        vc="gain=$VALUE"
        set="$VALUE=gain"
        digits="0"
        />

      <label loc="150 20" size="50 20"
        style="Label1"
        label="rd"
        justify="Left"
        />
      <entry loc="210 20" size="60 20"
        style="PlainText"
        vq="rd"
        vc="rd=$VALUE"
        set="$VALUE=rd"
        digits="2"
        />
      <label loc="280 20" size="30 20"
        style="Label1"
        label="µs"
        />

      <label loc="150 45" size="50 20"
        style="Label1"
        label="ad"
        justify="Left"
        />
      <entry loc="210 45" size="60 20"
        style="PlainText"
        vq="ad"
        vc="ad=$VALUE"
        set="$VALUE=ad"
        digits="2"
        />
      <label loc="280 45" size="30 20"
        style="Label1"
        label="µs"
        />

      <label loc="320 20" size="50 20"
        style="Label1"
        label="ddrtc"
        justify="Left"
        />
      <entry loc="320 45" size="60 20"
        style="PlainText"
        vq="ddrtc"
        vc="ddrtc=$VALUE"
        set="$VALUE=ddrtc"
        digits="2"
        />
    </group>

  </group>
</template>
